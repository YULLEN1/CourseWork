# План тестирования
**Цель тестирования** - автоматизация тестирования [сервиса по покупке тура](http://localhost:8080/), взаимодействующего с СУБД и API банка.
Сервис предлагает купить тур по определённой цене двумя способами:

1. Обычная оплата по дебетовой карте.
2. Уникальная технология: выдача кредита по данным банковской карты.

Для целей автоматизации тестирования выбрана обычная оплата по дебетовой карте.

# Предусловия
1. Открыт [веб-сервис](http://localhost:8080/).
2. На главной странице нажать кнопку "Купить"
3. Сервис обрабатывает только специальные номера карт, которые даны для тестирования:

* APPROVED карта — 1111 2222 3333 4444;
* DECLINED карта — 5555 6666 7777 8888. 

# Перечень автоматизируемых сценариев:

*Описание валидных данных:*
- имя и фамилия владельца карты - на латинице от 4 до 26 символов в сумме;
- Номер карты в формате: 0123 4567 8901 2345;
- месяц и год карты - действительный по сроку действия карты (равно или больше текущей дате) в формате "MM", "YY";
- CVC - из трех цифр.

Пример валидных данных: 1111 2222 3333 4444 / 05.27 / Ivan Ivanov / 123

## Позитивные сценарии:
*Описание сценария Happy Path:*
1. В поле "Номер карты" ввести валидное значение активной карты (см. предусловия).
2. В поле "Месяц" ввести валидные данные.
3. В поле "Год" ввести валидные данные.
4. В поле "Владелец" ввести валидное значение (латиницей имя и фамилию).
5. В поле "CVC/CVV" ввести валидное значение из трех цифр.
6. Нажать кнопку "Продолжить". <br>

[//]: # (Hello)
1. Ввод валидных данных со статусом карты APPROVED shouldBuyIfCardIsApproved(): <br>
*Описание валидных данных:* <br>
- используется APPROVED карта — 1111 2222 3333 4444; <br>
*Ожидаемый результат:* Всплывающее окно с сообщением "Успешно! Операция одобрена банком."  В БД есть запись APPROVED
2. Ввод валидных данных со статусом карты DECLINED shouldRefuseIfCardIsDeclined(): <br>
*Описание валидных данных:* <br>
- используется DECLINED карта — 5555 6666 7777 8888; <br>
*Ожидаемый результат:* Всплывающее окно с сообщением "Ошибка! Банк отказал в проведении операции." В БД есть запись DECLINED
3. Ввод имени и фамилии на латинице в поле "Владелец", состоящих из двух букв shouldBuyIfNameAndSurnameOf2Letter(): <br>
*Описание валидных данных:* <br>
- имя и фамилия на латинице, состоящие из двух букв (AТ NL); <br>
*Ожидаемый результат:* Всплывающее окно с сообщением "Успешно! Операция одобрена банком."
4. Ввод имени и фамилии на латинице, состоящих из 26 букв shouldBuyIfNameAndSurnameOf26Letter()*: <br>
*Описание валидных данных:* <br>
- имя и фамилия на латинице, состоящие из 26 букв (FDGHJNBVCDSER DRIOMNGHTKNBT); <br>
*Ожидаемый результат:* Всплывающее окно с сообщением "Успешно! Операция одобрена банком."
5. Ввод имени и фамилии на латинице, состоящих из 25 букв shouldBuyIfNameAndSurnameOf25Letter()*: <br>
*Описание валидных данных:* <br>
- имя и фамилия на латинице, состоящие из 25 букв (FDGHJNBVCDSER DRIOMNGHTKNB); <br>
*Ожидаемый результат:* Всплывающее окно с сообщением "Успешно! Операция одобрена банком."

*Согласно ISO/IEC 7811-2 и [ISO/IEC 7813](https://en.wikipedia.org/wiki/ISO/IEC_7813), при процессинге обрабатываются до
26 символов на имя и фамилию c возможными пробелами.

## Негативные сценарии
*Описание сценария (на примере ввода номера карты на кириллице)*
1. В поле "Номер карты" ввести данные на кириллице 16 символов.(укеи сапр варо леку)
2. В поле "Месяц" ввести валидные данные.
3. В поле "Год" ввести валидные данные.
4. В поле "Владелец" ввести валидное значение (латиницей имя и фамилию).
5. В поле "CVC/CVV" ввести валидное значение из трех цифр.
6. Нажать кнопку "Продолжить".


### Ввод невалидных значений в поле "Номер карты"

6. Ввод номера карты состоящим из нулей shouldDeclineIfCardNumberIsOfNulls(): <br>
*Описание невалидных данных:* <br>
- номер карты из 16 нулей (0000 0000 0000 0000); <br>
*Ожидаемый результат:* Поле "Номер карты" подсвечивает сообщение: "Неверно указан номер карты" <br>
7. Поле номера карты пустое shouldDeclineIfCardNumberIsEmpty(): <br>
*Описание невалидных данных:* <br>
- заполнить все поля, кроме поля номера карты; <br>
*Ожидаемый результат:* Под полем "Номер карты" появляется валидационное сообщение "Поле обязательно для заполнения" <br>
8. Ввод случайного номера карты из 16 цифр shouldDeclineIfCardNumberIsRandom(): <br>
*Описание невалидных данных:* <br>
- номер карты из 16 цифр, отличных от карт из предусловия (1234 5432 6789 2356); <br>
*Ожидаемый результат:* Поле "Номер карты" подсвечивает сообщение: "Неверно указан номер карты" <br>

### Ввод граничных значений в поле "Номер карты"
9. Ввод в поле "Номер карты" 15 цифр shouldDeclineIfCardNumberIsOf15Digit(): <br>
*Описание невалидных данных:* <br>
- номер карты из 15 цифр (1234 5678 4567 789); <br>
*Ожидаемый результат:* Поле "Номер карты" подсвечивает сообщение: "Неверно указан номер карты, номер карты должен состоять из 16 цифр" <br>
10. Ввод в поле "Номер карты" 17 цифр shouldDeclineIfCardNumberIsOf17Digit(): <br>
*Описание невалидных данных:* <br>
- номер карты из 17 цифр (1234 5678 4356 6789 9); <br>
*Ожидаемый результат:* Поле "Номер карты" заполняется до 16 символов <br>

### Ввод невалидных значений в поле "Месяц"
11. Ввод в поле "Месяц" истекшего срока действия карты shouldDeclineIfMonthIsOutdated(): <br>
*Описание невалидных данных:* <br>
- пример: карта действительна до 08 месяца, а покупка тура 10 месяца; <br>
*Ожидаемый результат:* Поле "Месяц" подсвечивает сообщение: "Неверно указан срок действия карты" <br>
12. Ввод спецсимволов в поле "Месяц" shouldDeclineIfMonthIsOfSymbols(): <br>
*Описание невалидных данных:* <br>
- месяц из спецсимволов (!@); <br>
*Ожидаемый результат:* Поле "Месяц" не заполняется <br>
13. Ввод латиницы в поле "Месяц" shouldDeclineIfMonthIsLatin(): <br>
*Описание невалидных данных:* <br>
- месяц из 2-х букв латиницы (fg); <br>
*Ожидаемый результат:* Поле "Месяц" не заполняется <br>
14. Ввод латиницы в поле "Месяц" shouldDeclineIfMonthIsCyrillic(): <br>
*Описание невалидных данных:* <br>
- месяц из 2-х букв кириллицы (пр); <br>
*Ожидаемый результат:* Поле "Месяц" не заполняется <br>
15. Ввод нулевого месяца в поле "Месяц" shouldDeclineIfMonthIsNull(): <br>
*Описание невалидных данных:* <br>
- месяц из 2 нулей (00); <br>
*Ожидаемый результат:* Поле "Месяц" подсвечивает сообщение: "Неверно указан срок действия карты" <br>
16. Ввод 13 месяца в поле "Месяц" shouldDeclineIfMonthIs13(): <br>
*Описание невалидных данных:* <br>
- месяц - 13; <br>
*Ожидаемый результат:* Поле "Месяц" подсвечивает сообщение: "Неверно указан срок действия карты" <br>
17. Пустое поле "Месяц" shouldDeclineIfMonthIsEmpty(): <br>
*Описание невалидных данных:* <br>
- ввод в форму валидных данных, поле "Месяц" оставить пустым; <br>
*Ожидаемый результат:* Под полем "Месяц" появляется валидационное сообщение "Поле обязательно для заполнения" <br>

### Ввод невалидных значений в поле "Год"
18. Ввод в поле "Год" истекшего срока действия карты shouldDeclineIfYearIsOutdated(): <br>
*Описание невалидных данных:* <br>
- пример карта действительна до 08 года, а покупка тура в 10-ом году; <br>
*Ожидаемый результат:* Поле "Год" подсвечивает сообщение: "Неверно указан срок действия карты" <br>
19. Ввод спецсимволов в поле "Год" shouldDeclineIfYearIsOfSymbols(): <br>
*Описание невалидных данных:* <br>
- год из спецсимволов (%:); <br>
*Ожидаемый результат:* Поле "Год" не заполняется <br>
20. Ввод латиницы в поле "Год" shouldDeclineIfMonthIsLatin(): <br>
*Описание невалидных данных:* <br>
- год из 2-х букв латиницы (hj); <br>
*Ожидаемый результат:* Поле "Месяц" не заполняется <br>
21. Ввод латиницы в поле "Год" shouldDeclineIfMonthIsCyrillic(): <br>
*Описание невалидных данных:* <br>
- месяц из 2-х букв кириллицы (пр); <br>
*Ожидаемый результат:* Поле "Месяц" не заполняется <br>
22. Ввод нулевого года в поле "Год" shouldDeclineIfYearIsNull(): <br>
*Описание невалидных данных:* <br>
- нулевой год (00); <br>
*Ожидаемый результат:* Поле "Год" подсвечивает сообщение: "Неверно указан срок действия карты" <br>
23. Пустое поле "Год" shouldDeclineIdYearIsEmpty(): <br>
*Описание невалидных данных:* <br>
- ввод валидных данных, поле "Год" оставить пустым; <br>
*Ожидаемый результат:* Поле "Год" подсвечивает сообщение: "Неверно указан срок действия карты" <br>

### Ввод невалидных значений в поле "Владелец"
24. Ввод в поле "Владелец" имени и фамилии на кириллице shouldDeclineIfHolderIsCyrillic(): <br>
*Описание невалидных данных:* <br>
- имя и фамилия на кириллице (Иван Иванов); <br>
*Ожидаемый результат:* Поле "Владелец" подсвечивает сообщение: "Поле заполняется латиницей" <br>
25. Ввод цифр в поле "Владелец" shouldDeclineIfHolderIsOfDigits(): <br>
*Описание невалидных данных:* <br>
- имя и фамилия цифрами (12345 12345); <br>
*Ожидаемый результат:* Поле "Владелец" подсвечивает сообщение: "Поле заполняется латиницей" <br>
26. Ввод спецсимволов в поле "Владелец" shouldDeclineIfHolderIsOfSymbols(): <br>
*Описание невалидных данных:* <br>
- имя и фамилия спецсимволами (;%:?*№" !:*?%); <br>
*Ожидаемый результат:* Поле "Владелец" подсвечивает сообщение: "Поле заполняется латиницей" <br>
27. Ввод имени в поле "Владелец" на латинице, без фамилии shouldDeclineIfHolderIsOfSymbols(): <br>
*Описание невалидных данных:* <br>
- имя на латинице, без фамилии (Ivan); <br>
*Ожидаемый результат:* Под полем "Владелец" появляется валидационное сообщение "Поле обязательно для заполнения" <br>
28. Ввод фамилии на латинице, имени - на кириллице в поле "Владелец" shouldDeclineIfNameIsCyrillicAndSurnameIsLatin(): <br>
*Описание невалидных данных:* <br>
- имя - на кириллице, фамилия - на латинице (Иван Ivanov); <br>
*Ожидаемый результат:* Поле "Владелец" подсвечивает сообщение: "Поле заполняется латиницей" <br>
29. Ввод имени на латинице, фамилии - на кириллице в поле "Владелец" shouldDeclineIfNameIsLatinAndSurnameIsCyrillic(): <br>
*Описание невалидных данных:* <br>
- имя - на латинице, фамилия - на кириллице (Ivan Иванов); <br>
*Ожидаемый результат:* Поле "Владелец" подсвечивает сообщение: "Поле заполняется латиницей" <br>
30. Пустое поле "Владелец" shouldDeclineIfHolderIsEmpty(): <br>
*Описание невалидных данных:* <br>
- ввод валидных данных, поле "Владелец" оставить пустым; <br>
*Ожидаемый результат:* Под полем "Владелец" появляется валидационное сообщение "Поле обязательно для заполнения" <br>
31. Ввод двойного имени с дефисом в поле "Владелец" на латинице shouldDeclineIfDoubleNameWithHyphen(): <br>
*Описание невалидных данных:* <br>
- двойное имя владельца на латинице с дефисом (Ivan - Alexey Ivanov); <br>
*Ожидаемый результат:* Под полем "Владелец" появляется валидационное сообщение "Значения поля указывается без знаков".

### Ввод граничных значений в поле "Владелец"
32. Ввод имени и фамилии из одной буквы в поле "Владелец" shouldDeclineIfOneLetterNameAndSurname(): <br>
*Описание невалидных данных:* <br>
- имя и фамилия из одной латинской буквы (A); <br>
*Ожидаемый результат:* Под полем "Владелец" появляется валидационное сообщение "От 4 до 26 символов"* <br> 
33. Ввод имени и фамилии на латинице в поле "Владелец", состоящих из 27 букв shouldDeclineIfNameAndSurnameOf27Letters(): <br>
*Описание валидных данных:* <br>
- имя и фамилия на латинице, состоящие из 27 букв (FDGHJNBVCDSER DRIOMNGHTKNBTJH); <br>
*Ожидаемый результат:* Под полем "Владелец" появляется валидационное сообщение "" <От 4 до 26 символов>; <br>

*Согласно ISO/IEC 7811-2 и [ISO/IEC 7813](https://en.wikipedia.org/wiki/ISO/IEC_7813), при процессинге обрабатываются
26 символов на имя и фамилию c возможными пробелами.

### Ввод невалидных значений в поле "CVC/CVV"
34. Ввод данных в поле "CVC/CVV" в виде нулей shouldDeclineIfCVVIs3Null(): <br>
*Описание невалидных данных:* <br>
- CVV из трех нулей (000); <br>
*Ожидаемый результат:* Под полем "CVC/CVV" появляется валидационное сообщение "Неверно указан cvc/cvv код" <br>
35. Ввод данных в поле "CVC/CVV" спецсимволами shouldDeclineIfCVVIsOfSymbols(): <br>
*Описание невалидных данных:* <br>
- CVV из трех спецсимволов (%:?); <br>
*Ожидаемый результат:* Поле "CVV" не заполняется <br>
36. Ввод данных в поле "CVC/CVV" на кириллице shouldDeclineIfCVVIsCyrillic(): <br>
*Описание невалидных данных:* <br>
- CVV из трех букв на кириллице (авп); <br>
*Ожидаемый результат:* Поле "CVV" не заполняется <br>
37. Ввод данных в поле "CVC/CVV" на латинице shouldDeclineIfCVVIsLatin(): <br>
*Описание невалидных данных:* <br>
- CVV из трех букв на латинице (fbc); <br>
*Ожидаемый результат:* Поле "CVV" не заполняется <br>

### Ввод граничных значений в поле "CVC/CVV"
38. Ввод двух цифр в поле CVV shouldDeclineIfCVVIsOf2Digit(): <br>
*Описание невалидных данных:* <br>
- CVV из 2 цифр (12); <br>
*Ожидаемый результат:* Под полем "CVC/CVV" появляется валидационное сообщение "Неверно указан cvc/cvv код";
39. Ввод четырех цифр в поле CVV shouldDeclineIfCVVIsOf4Digit(): <br>
*Описание невалидных данных:* <br>
- CVV из 4 цифр (1234); <br>
*Ожидаемый результат:* Под полем "CVC/CVV" появляется валидационное сообщение "Неверно указан cvc/cvv код" <br>

# Перечень используемых инструментов с обоснованием выбора
- **IntelliJ IDEA Community Edition** - хорошо изученная интегрированная среда разработки программного обеспечения для многих языков программирования, в частности Java, JavaScript, Python, разработанная компанией JetBrains; 
- **Gradle** - система автоматической сборки и управления зависимостями, проще подключать зависимости, чем в Maven; 
- **Java 11** - стабильная версия строго типизированного объектно-ориентированного языка программирования общего назначения;
- **JUnit 5** - одна из самых популярных платформ модульного тестирования в экосистеме Java, с ней больше опыта; 
- **Selenide** - один из фреймворков для автоматизированного тестирования веб-приложений, проще, чем Selenium;
- **Lombok** - плагин компилятора, который добавляет в Java новые «ключевые слова» и превращает аннотации в Java-код, уменьшая усилия на разработку и обеспечивая некоторую дополнительную функциональность;
- **JavaFaker** - это библиотека, которая позволяет генерировать случайные данные;
- **Allure** - это фреймворк для сбора данных и построения отчетов о тестировании кода, легкий в интеграции и обеспечивающий наглядные результаты;
- **Docker** - это платформа для разработки и запуска контейнеров. Докер позволяет создавать контейнеры, автоматизирует их запуск и управляет жизненным циклом;
- **MySql** - заявлена поддержка данных СУБД;
- **GitHub** - крупнейший веб-сервис для хостинга IT-проектов и их совместной разработки, основанный на системе контроля Git.
- **DBeaver** - широко распространенный клиент с графическим интерфейсом для взаимодействия с СУБД.

# Перечень необходимых разрешений, данных и доступов
1. Разрешение на автоматизированное тестирование сайта "Путешествие дня".
2. Перечень тестовых данных: имя и фамилия держателя карты, номер карты, месяц и год срока действия карты, cvc-код (для позитивных сценариев).
3. Доступы к базе данных MySQL и API сайта "Путешествие дня".

# Перечень и описание возможных рисков при автоматизации
1. Трудности при поиске локаторов элементов на страницах, возможно, что не все имеют явные привязки. В ходе выполнения проекта может измениться структура сайта и локаторы придётся уточнять.
2. Риск некорректной настройки запуска симулятора.
3. Риск некорректной настройки БД.
4. Ошибки в коде: некачественный код или неправильные алгоритмы могут привести к ошибкам в автоматизированных процессах.
5. Ограниченная гибкость: автоматизированные тесты могут быть ограничены в их возможностях и не могут адаптироваться к изменениям в условиях работы.
6. Увеличение накладных расходов на автоматизацию (возможно данную функциональность дешевле протестировать руками).
7. Риски производительности: автоматизированные тесты могут занимать много времени на выполнение

# Интервальная оценка с учётом рисков в часах
1. Настройка и запуск БД и симулятора - 3 часа.
2. Написание автотестов - 35 часов.
3. Подготовка отчетов о проведении тестирования - 12 часов

# План сдачи работ: когда будут проведены автотесты, результаты их проведения и отчёт по автоматизации
1. План автоматизации - в течение 3 дней.
2. Написание и запуск автотестов - в течение 6 дней.
3. Подготовка отчетов о проведении тестирования - в течение 2 дней.